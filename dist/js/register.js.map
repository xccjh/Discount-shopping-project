{"version":3,"sources":["register.js"],"names":["$","init","eventList","on","mobile_txt","val","trim","checkPhone","mui","toast","post","mobile","result","meta","status","console","log","attr","time","text","timeId","setInterval","clearInterval","removeAttr","phone","test"],"mappings":";;AAAAA,CAAC,CAAC,YAAW;AACX;;;;;;;;;;;;AAaAC,EAAAA,IAAI;;AACJ,WAASA,IAAT,GAAgB;AACdC,IAAAA,SAAS;AACV;;AAED,WAASA,SAAT,GAAqB;AACnB;AACAF,IAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBG,EAAnB,CAAsB,KAAtB,EAA6B,YAAW;AACtC;AACA;AACA;AAEA;AACA,UAAIC,UAAU,GAAGJ,CAAC,CAAC,sBAAD,CAAD,CACdK,GADc,GAEdC,IAFc,EAAjB,CANsC,CAStC;;AAEA,UAAI,CAACC,UAAU,CAACH,UAAD,CAAf,EAA6B;AAC3B;AACA;AACAI,QAAAA,GAAG,CAACC,KAAJ,CAAU,QAAV;AAEA;AACD,OAjBqC,CAkBtC;;;AACAT,MAAAA,CAAC,CAACU,IAAF,CACE,0DADF,EAEE;AACEC,QAAAA,MAAM,EAAEP;AADV,OAFF,EAKE,UAASQ,MAAT,EAAiB;AACf,YAAGA,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAoB,GAAvB,EAA2B;AACzBC,UAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAZ,EADyB,CAEzB;AACA;;AACCZ,UAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBiB,IAAnB,CAAwB,UAAxB,EAAmC,UAAnC,EAJwB,CAKzB;AACA;;AACA,cAAIC,IAAI,GAAC,CAAT;AACAlB,UAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBmB,IAAnB,WAA2BD,IAA3B;AACA,cAAIE,MAAM,GAACC,WAAW,CAAC,YAAM;AAC3BH,YAAAA,IAAI;AACJlB,YAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBmB,IAAnB,WAA2BD,IAA3B,sCAF2B,CAG3B;;AACA,gBAAGA,IAAI,IAAE,CAAT,EAAW;AACT;AACAI,cAAAA,aAAa,CAACF,MAAD,CAAb,CAFS,CAGT;;AACApB,cAAAA,CAAC,CAAC,eAAD,CAAD,CAAmBuB,UAAnB,CAA8B,UAA9B,EAA0CJ,IAA1C,CAA+C,OAA/C;AACD;AACF,WAVqB,EAUnB,IAVmB,CAAtB;AAWD,SApBD,MAoBK;AACHJ,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAiBJ,MAAjB;AACD;AACF,OA7BH;AA+BD,KAlDD;AAmDD,GAxEU,CA0EX;;;AACA,WAASL,UAAT,CAAoBiB,KAApB,EAA2B;AACzB,QAAI,CAAC,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAL,EAAoC;AAClC,aAAO,KAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAP;AACD;AACF;AACF,CAlFA,CAAD","sourcesContent":["$(function() {\r\n  /* \r\n  1 绑定 获取验证码 tap事件\r\n    1 获取手机号码 进行合法性的验证\r\n      1 不通过 给出一个用户提示 就ok\r\n  2 构造参数 发送请求到后台   成功了\r\n    1 禁用按钮   $(this).attr(\"disabled\",\"disabled\");\r\n    2 开启定时器 倒计时 60s\r\n      1 修改按钮的文字 定时的时间\r\n    3 时间到了 \r\n      1 清除定时器\r\n      2 重新启用 按钮\r\n\r\n   */\r\n  init();\r\n  function init() {\r\n    eventList();\r\n  }\r\n\r\n  function eventList() {\r\n    // 绑定 获取验证码 点击事件\r\n    $(\".get_code_btn\").on(\"tap\", function() {\r\n      // attr $ 动态添加属性的方法\r\n      // disabled 标签本身就支持的 禁用属性\r\n      // $(this).attr(\"disabled\",\"disabled\");\r\n\r\n      // 1 获取手机 进行验证 属性选择器  trim 去除掉 值两边 的空格 “   15155515    ”\r\n      let mobile_txt = $(\"input[name='mobile']\")\r\n        .val()\r\n        .trim();\r\n      // 1.1 手机号码合法性判断  找工具函数 正则表达式！！！\r\n\r\n      if (!checkPhone(mobile_txt)) {\r\n        //  失败\r\n        // 1.2 弹出一个提示\r\n        mui.toast(\"手机号码错误\");\r\n\r\n        return;\r\n      }\r\n      //  2 构造参数发送到后台\r\n      $.post(\r\n        \"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\",\r\n        {\r\n          mobile: mobile_txt\r\n        },\r\n        function(result) {\r\n          if(result.meta.status==200){\r\n            console.log(result);\r\n            // 成功 \r\n            // 2.1 禁用按钮\r\n             $(\".get_code_btn\").attr(\"disabled\",\"disabled\");\r\n            //  2.2 开启 定时器\r\n            // 要倒计时的总时间 5s\r\n            let time=5;\r\n            $(\".get_code_btn\").text(`${time} 秒后再获取`);\r\n            let timeId=setInterval(() => {\r\n              time--;\r\n              $(\".get_code_btn\").text(`${time} 秒后再获取`);\r\n              // 2.3 判断时间是否到期了\r\n              if(time==0){\r\n                // 2.3.1 清除定时器\r\n                clearInterval(timeId);\r\n                // 2.3.2 启用按钮 修改按钮文字\r\n                $(\".get_code_btn\").removeAttr(\"disabled\").text(\"获取验证码\");\r\n              }\r\n            }, 1000);\r\n          }else{\r\n            console.log(\"失败\",result);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // 验证 手机合法性\r\n  function checkPhone(phone) {\r\n    if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n});\r\n"],"file":"register.js"}