{"version":3,"sources":["cart.js"],"names":["$","init","cartAll","token","JSON","parse","sessionStorage","getItem","ajax","url","headers","success","result","meta","status","cart_info","data","console","log","html","template","goodsObj","mui","numbox"],"mappings":";;AACAA,CAAC,CAAC,YAAY;AACZ;;;;;;;;;AASAC,EAAAA,IAAI;;AACJ,WAASA,IAAT,GAAgB;AACdC,IAAAA,OAAO;AACR,GAbW,CAeZ;;;AACA,WAASA,OAAT,GAAmB;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA,QAAIC,KAAK,GAACC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,UAAvB,CAAX,EAA+CJ,KAAzD,CAZiB,CAajB;AACA;AAEA;;AACAH,IAAAA,CAAC,CAACQ,IAAF,CAAO;AACLC,MAAAA,GAAG,EAAC,mDADC;AAEL;AACA;AACAC,MAAAA,OAAO,EAAC;AACN,yBAAkBP;AADZ,OAJH;AAOLQ,MAAAA,OAAO,EAAC,iBAAUC,MAAV,EAAkB;AACxB;AACA,YAAGA,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAoB,GAAvB,EAA2B;AACzB;AACA;AACA;AACA,cAAIC,SAAS,GAACX,IAAI,CAACC,KAAL,CAAWO,MAAM,CAACI,IAAP,CAAYD,SAAvB,CAAd;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;AACA,cAAII,IAAI,GAACC,QAAQ,CAAC,SAAD,EAAW;AAACC,YAAAA,QAAQ,EAACN;AAAV,WAAX,CAAjB;AACAf,UAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBmB,IAAjB,CAAsBA,IAAtB,EAPyB,CASzB;;AACAG,UAAAA,GAAG,CAAC,aAAD,CAAH,CAAmBC,MAAnB;AAED,SAZD,MAYK;AACHN,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAiBN,MAAjB;AACD;AAEF;AAzBI,KAAP;AA4BD;AAGF,CAhEA,CAAD","sourcesContent":["\r\n$(function () {\r\n  /* \r\n  1 任何人都可以访问这个购物车页面吗   登录过后的用户 才可以访问\r\n    1 判断 本地存储中有没有  userinfo 这个数据  有 登录过\r\n      假如 没有数据 \r\n        1 把当前的页面路径存入到 本地存储中 pageurl\r\n        2 跳转到登录页面\r\n  2 发送请求渲染数据 私人的数据  token  请求头 \r\n    1 token  本地存储 复杂类型\r\n   */\r\n  init();\r\n  function init() {\r\n    cartAll();\r\n  }\r\n\r\n  // 获取购物车数据\r\n  function cartAll() {\r\n\r\n    // let obj={ name:\"猪八戒\", skill:\"卖队友\" };\r\n    // // es5 \r\n    // // let name=obj.name;\r\n    // // let skill=obj.skill;\r\n    // // es6  解构的语法\r\n    // let {name,skill}=obj;\r\n    // console.log(name,skill);\r\n\r\n\r\n    // 2.1 获取本地存储中的token 字段\r\n    let token=JSON.parse(sessionStorage.getItem(\"userinfo\")).token;\r\n    // es6  解构 node js es 6  解构 知识点\r\n    // let {token}=JSON.parse(sessionStorage.getItem(\"userinfo\"));\r\n\r\n    // $.get 没有办法 设置请求头\r\n    $.ajax({\r\n      url:\"http://api.pyg.ak48.xyz/api/public/v1/my/cart/all\",\r\n      // type:\"get\"\r\n      // data:{}\r\n      headers:{\r\n        \"Authorization\" : token\r\n      },\r\n      success:function (result) {\r\n        // console.log(result);\r\n        if(result.meta.status==200){\r\n          // 以前循环的数据都是数组 但是现在 是对象\r\n          // 数组可以循环 对象可以循环\r\n          // 要传递给模板引擎的数据  \r\n          let cart_info=JSON.parse(result.data.cart_info);\r\n          console.log(cart_info);\r\n          let html=template(\"mainTpl\",{goodsObj:cart_info});\r\n          $(\".order_list\").html(html);\r\n\r\n          // 数字输入框的初始化\r\n          mui(\".mui-numbox\").numbox()\r\n\r\n        }else{  \r\n          console.log(\"失败\",result);\r\n        }\r\n        \r\n      }\r\n    })\r\n    \r\n  }\r\n  \r\n\r\n})\r\n"],"file":"cart.js"}